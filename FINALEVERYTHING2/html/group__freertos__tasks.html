<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FINALEVERYTHING2: FreeRTOS Task Functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">FINALEVERYTHING2
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('group__freertos__tasks.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">FreeRTOS Task Functions</div></div>
</div><!--header-->
<div class="contents">

<p>Main task functions for the FreeRTOS system.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga96c361e8ae7194173d6843a3b9a2fb73" id="r_ga96c361e8ae7194173d6843a3b9a2fb73"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga96c361e8ae7194173d6843a3b9a2fb73">temperatureTask</a> (void *pvParameters)</td></tr>
<tr class="memdesc:ga96c361e8ae7194173d6843a3b9a2fb73"><td class="mdescLeft">&#160;</td><td class="mdescRight">AM2302 temperature and humidity monitoring task (64Hz, Core 0)  <br /></td></tr>
<tr class="separator:ga96c361e8ae7194173d6843a3b9a2fb73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga831f98f925aec6e63bab0a9258eb3acd" id="r_ga831f98f925aec6e63bab0a9258eb3acd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga831f98f925aec6e63bab0a9258eb3acd">motionDetectionTask</a> (void *pvParameters)</td></tr>
<tr class="memdesc:ga831f98f925aec6e63bab0a9258eb3acd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enhanced motion detection and processing task (50Hz, Core 0)  <br /></td></tr>
<tr class="separator:ga831f98f925aec6e63bab0a9258eb3acd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1ac58d3a2c462ad5f683ea0f9427e9a9" id="r_ga1ac58d3a2c462ad5f683ea0f9427e9a9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga1ac58d3a2c462ad5f683ea0f9427e9a9">alertLedTask</a> (void *pvParameters)</td></tr>
<tr class="memdesc:ga1ac58d3a2c462ad5f683ea0f9427e9a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Alert LED control task (200Hz, Core 1)  <br /></td></tr>
<tr class="separator:ga1ac58d3a2c462ad5f683ea0f9427e9a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac55d0909bfe96e544bb1324d9e0be983" id="r_gac55d0909bfe96e544bb1324d9e0be983"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gac55d0909bfe96e544bb1324d9e0be983">displayTask</a> (void *pvParameters)</td></tr>
<tr class="memdesc:gac55d0909bfe96e544bb1324d9e0be983"><td class="mdescLeft">&#160;</td><td class="mdescRight">LCD display management task (32Hz, Core 1)  <br /></td></tr>
<tr class="separator:gac55d0909bfe96e544bb1324d9e0be983"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Main task functions for the FreeRTOS system. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga1ac58d3a2c462ad5f683ea0f9427e9a9" name="ga1ac58d3a2c462ad5f683ea0f9427e9a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1ac58d3a2c462ad5f683ea0f9427e9a9">&#9670;&#160;</a></span>alertLedTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void alertLedTask </td>
          <td>(</td>
          <td class="paramtype">void *</td>          <td class="paramname"><span class="paramname"><em>pvParameters</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Alert LED control task (200Hz, Core 1) </p>
<p>This high-frequency task manages the progressive alert LED on pin 42, providing smooth blinking patterns that correspond to different alert levels. The high frequency ensures responsive LED control and smooth visual feedback.</p>
<p>LED Blink Patterns:</p><ul>
<li>Rate 0: LED off (no alert)</li>
<li>Rate 1: Slow blink (1000ms interval)</li>
<li>Rate 2: Medium blink (500ms interval)</li>
<li>Rate 3: Fast blink (200ms interval)</li>
<li>Rate 4: Critical blink (100ms interval)</li>
</ul>
<p>Task Specifications:</p><ul>
<li>Frequency: 200Hz (5ms period)</li>
<li>Core: 1 (user interface core)</li>
<li>Priority: 3 (high priority for responsive UI)</li>
<li>Stack: 2048 bytes</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pvParameters</td><td>Unused FreeRTOS parameter (NULL)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>High frequency ensures smooth LED transitions and responsive control </dd>
<dd>
Receives commands from motion detection task via alertQueue </dd></dl>

</div>
</div>
<a id="gac55d0909bfe96e544bb1324d9e0be983" name="gac55d0909bfe96e544bb1324d9e0be983"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac55d0909bfe96e544bb1324d9e0be983">&#9670;&#160;</a></span>displayTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void displayTask </td>
          <td>(</td>
          <td class="paramtype">void *</td>          <td class="paramname"><span class="paramname"><em>pvParameters</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>LCD display management task (32Hz, Core 1) </p>
<p>This task manages the LCD display, showing current system status, motion information, environmental data, and user interface elements. It receives data from both motion detection and temperature monitoring tasks.</p>
<p>Display Information:</p><ul>
<li>Line 1: Motion status message and current temperature</li>
<li>Line 2: Motion counter, alert level, and button status</li>
<li>Special displays for system stopped state</li>
</ul>
<p>Task Specifications:</p><ul>
<li>Frequency: 32Hz (31ms period)</li>
<li>Core: 1 (user interface core)</li>
<li>Priority: 1</li>
<li>Stack: 2048 bytes</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pvParameters</td><td>Unused FreeRTOS parameter (NULL)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Receives data from multiple tasks via motionQueue and temperatureQueue </dd>
<dd>
Provides comprehensive system status information to user </dd></dl>

</div>
</div>
<a id="ga831f98f925aec6e63bab0a9258eb3acd" name="ga831f98f925aec6e63bab0a9258eb3acd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga831f98f925aec6e63bab0a9258eb3acd">&#9670;&#160;</a></span>motionDetectionTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void motionDetectionTask </td>
          <td>(</td>
          <td class="paramtype">void *</td>          <td class="paramname"><span class="paramname"><em>pvParameters</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enhanced motion detection and processing task (50Hz, Core 0) </p>
<p>This is the core task that handles PIR motion detection, maintains the motion persistence counter, processes emergency stop button input, and coordinates the overall system response. It implements a sophisticated counter-based approach to handle PIR sensor timeout limitations.</p>
<p>Key Responsibilities:</p><ul>
<li>Process PIR sensor interrupts and maintain motion persistence counter</li>
<li>Handle emergency stop button functionality</li>
<li>Implement 6-second polling cycle for counter decrement</li>
<li>Calculate temperature-adjusted alert levels</li>
<li>Control status LED based on motion state</li>
<li>Send motion data to display and alert tasks</li>
</ul>
<p>Task Specifications:</p><ul>
<li>Frequency: 50Hz (20ms period)</li>
<li>Core: 0 (sensor processing core)</li>
<li>Priority: 2</li>
<li>Stack: 4096 bytes</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pvParameters</td><td>Unused FreeRTOS parameter (NULL)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Implements counter-based persistence to handle PIR sensor timeouts </dd>
<dd>
Emergency stop only functional when counter &gt; ALERT_STOP_THRESHOLD </dd></dl>

</div>
</div>
<a id="ga96c361e8ae7194173d6843a3b9a2fb73" name="ga96c361e8ae7194173d6843a3b9a2fb73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga96c361e8ae7194173d6843a3b9a2fb73">&#9670;&#160;</a></span>temperatureTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void temperatureTask </td>
          <td>(</td>
          <td class="paramtype">void *</td>          <td class="paramname"><span class="paramname"><em>pvParameters</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>AM2302 temperature and humidity monitoring task (64Hz, Core 0) </p>
<p>This task reads the AM2302 sensor every 3 seconds (sensor limitation) but processes temperature-based threshold calculations at 64Hz to maintain high-frequency system responsiveness. The task updates global temperature and humidity variables and sends data to other tasks via queues.</p>
<p>Task Specifications:</p><ul>
<li>Frequency: 64Hz (15.6ms period)</li>
<li>Core: 0 (sensor processing core)</li>
<li>Priority: 2</li>
<li>Stack: 4096 bytes</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pvParameters</td><td>Unused FreeRTOS parameter (NULL)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Sensor reading limited to every 3 seconds due to AM2302 hardware constraints </dd>
<dd>
Threshold calculations performed at full 64Hz for system responsiveness </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
